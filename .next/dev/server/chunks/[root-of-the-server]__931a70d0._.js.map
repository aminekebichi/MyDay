{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/kebichiamine/git_workspace/MyDay/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client'\n\nconst prismaClientSingleton = () => {\n    return new PrismaClient()\n}\n\ndeclare const globalThis: {\n    prismaGlobal: ReturnType<typeof prismaClientSingleton>;\n} & typeof global;\n\nconst prisma = globalThis.prismaGlobal ?? prismaClientSingleton()\n\nexport default prisma\n\nif (process.env.NODE_ENV !== 'production') globalThis.prismaGlobal = prisma\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,wBAAwB;IAC1B,OAAO,IAAI,sMAAY;AAC3B;AAMA,MAAM,SAAS,WAAW,YAAY,IAAI;uCAE3B;AAEf,wCAA2C,WAAW,YAAY,GAAG"}},
    {"offset": {"line": 62, "column": 0}, "map": {"version":3,"sources":["file:///Users/kebichiamine/git_workspace/MyDay/src/lib/session.ts"],"sourcesContent":["import prisma from \"./prisma\";\n\nexport async function validateSession(request: Request) {\n    const sessionToken = request.headers.get(\"X-Session-Token\");\n\n    if (!sessionToken) {\n        throw new Error(\"UNAUTHORIZED\");\n    }\n\n    const user = await prisma.user.findUnique({\n        where: { sessionToken },\n    });\n\n    if (!user) {\n        throw new Error(\"UNAUTHORIZED\");\n    }\n\n    return user;\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEO,eAAe,gBAAgB,OAAgB;IAClD,MAAM,eAAe,QAAQ,OAAO,CAAC,GAAG,CAAC;IAEzC,IAAI,CAAC,cAAc;QACf,MAAM,IAAI,MAAM;IACpB;IAEA,MAAM,OAAO,MAAM,iIAAM,CAAC,IAAI,CAAC,UAAU,CAAC;QACtC,OAAO;YAAE;QAAa;IAC1B;IAEA,IAAI,CAAC,MAAM;QACP,MAAM,IAAI,MAAM;IACpB;IAEA,OAAO;AACX"}},
    {"offset": {"line": 87, "column": 0}, "map": {"version":3,"sources":["file:///Users/kebichiamine/git_workspace/MyDay/src/lib/validation.ts"],"sourcesContent":["import { z } from \"zod\";\nimport { ItemType, Priority, Recurrence } from \"@prisma/client\";\n\nexport const createItemSchema = z.object({\n    title: z.string().min(1, \"Title is required\"),\n    type: z.nativeEnum(ItemType),\n    priority: z.nativeEnum(Priority),\n    date: z.string().transform((val) => new Date(val)),\n    time: z.string().optional().transform((val) => (val ? new Date(val) : undefined)),\n    recurrence: z.nativeEnum(Recurrence).optional().default(Recurrence.NONE),\n    recurrenceEndDate: z.string().optional().transform((val) => (val ? new Date(val) : undefined)),\n    notes: z.string().optional(),\n    attendeeName: z.string().optional(),\n});\n\nexport const updateItemSchema = createItemSchema.partial().extend({\n    completedAt: z.string().optional().nullable().transform((val) => {\n        if (val === null) return null;\n        return val ? new Date(val) : undefined;\n    }),\n});\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEO,MAAM,mBAAmB,oLAAC,CAAC,MAAM,CAAC;IACrC,OAAO,oLAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IACzB,MAAM,oLAAC,CAAC,UAAU,CAAC,kMAAQ;IAC3B,UAAU,oLAAC,CAAC,UAAU,CAAC,kMAAQ;IAC/B,MAAM,oLAAC,CAAC,MAAM,GAAG,SAAS,CAAC,CAAC,MAAQ,IAAI,KAAK;IAC7C,MAAM,oLAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,SAAS,CAAC,CAAC,MAAS,MAAM,IAAI,KAAK,OAAO;IACtE,YAAY,oLAAC,CAAC,UAAU,CAAC,oMAAU,EAAE,QAAQ,GAAG,OAAO,CAAC,oMAAU,CAAC,IAAI;IACvE,mBAAmB,oLAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,SAAS,CAAC,CAAC,MAAS,MAAM,IAAI,KAAK,OAAO;IACnF,OAAO,oLAAC,CAAC,MAAM,GAAG,QAAQ;IAC1B,cAAc,oLAAC,CAAC,MAAM,GAAG,QAAQ;AACrC;AAEO,MAAM,mBAAmB,iBAAiB,OAAO,GAAG,MAAM,CAAC;IAC9D,aAAa,oLAAC,CAAC,MAAM,GAAG,QAAQ,GAAG,QAAQ,GAAG,SAAS,CAAC,CAAC;QACrD,IAAI,QAAQ,MAAM,OAAO;QACzB,OAAO,MAAM,IAAI,KAAK,OAAO;IACjC;AACJ"}},
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":["file:///Users/kebichiamine/git_workspace/MyDay/src/app/api/items/%5Bid%5D/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport prisma from \"@/lib/prisma\";\nimport { validateSession } from \"@/lib/session\";\nimport { updateItemSchema } from \"@/lib/validation\";\nimport { z } from \"zod\";\n\nexport async function PATCH(request: Request, context: { params: { id: string } }) {\n    try {\n        const user = await validateSession(request);\n        const body = await request.json();\n\n        // For Next.js App Router dynamic routes, params is a promise in Next 15+\n        const { id } = await context.params;\n\n        if (!id) {\n            return NextResponse.json({ error: \"Item ID is required\", code: \"BAD_REQUEST\" }, { status: 400 });\n        }\n\n        const parsedData = updateItemSchema.parse(body);\n\n        // Verify ownership before updating\n        const existingItem = await prisma.item.findUnique({\n            where: { id }\n        });\n\n        if (!existingItem) {\n            return NextResponse.json({ error: \"Item not found\", code: \"NOT_FOUND\" }, { status: 404 });\n        }\n\n        if (existingItem.userId !== user.id) {\n            return NextResponse.json({ error: \"Forbidden\", code: \"FORBIDDEN\" }, { status: 403 });\n        }\n\n        const item = await prisma.item.update({\n            where: { id },\n            data: parsedData,\n        });\n\n        return NextResponse.json(item);\n    } catch (error) {\n        if (error instanceof Error && error.message === \"UNAUTHORIZED\") {\n            return NextResponse.json({ error: \"Unauthorized\", code: \"UNAUTHORIZED\" }, { status: 401 });\n        }\n        if (error instanceof z.ZodError) {\n            return NextResponse.json({ error: \"Validation failed\", code: \"VALIDATION_ERROR\", details: error.flatten().fieldErrors }, { status: 400 });\n        }\n        return NextResponse.json({ error: \"Internal Server Error\", code: \"INTERNAL_ERROR\" }, { status: 500 });\n    }\n}\n\nexport async function DELETE(request: Request, context: { params: { id: string } }) {\n    try {\n        const user = await validateSession(request);\n\n        const { id } = await context.params;\n\n        if (!id) {\n            return NextResponse.json({ error: \"Item ID is required\", code: \"BAD_REQUEST\" }, { status: 400 });\n        }\n\n        // Verify ownership before deleting\n        const existingItem = await prisma.item.findUnique({\n            where: { id }\n        });\n\n        if (!existingItem) {\n            return NextResponse.json({ error: \"Item not found\", code: \"NOT_FOUND\" }, { status: 404 });\n        }\n\n        if (existingItem.userId !== user.id) {\n            return NextResponse.json({ error: \"Forbidden\", code: \"FORBIDDEN\" }, { status: 403 });\n        }\n\n        await prisma.item.delete({\n            where: { id },\n        });\n\n        return NextResponse.json({ success: true });\n    } catch (error) {\n        if (error instanceof Error && error.message === \"UNAUTHORIZED\") {\n            return NextResponse.json({ error: \"Unauthorized\", code: \"UNAUTHORIZED\" }, { status: 401 });\n        }\n        return NextResponse.json({ error: \"Internal Server Error\", code: \"INTERNAL_ERROR\" }, { status: 500 });\n    }\n}\n"],"names":[],"mappings":"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"}}]
}